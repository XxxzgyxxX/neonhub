--[[
    Neon Hub - Blox Fruits Script
    Created by XxxzgyxxX
    Version: 2.1.0
    Last Updated: 2023-11-15
]]

-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualUser = game:GetService("VirtualUser")
local RunService = game:GetService("RunService")
local TeleportService = game:GetService("TeleportService")

-- Variables
local Player = Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

-- Anti AFK
Player.Idled:Connect(function()
    VirtualUser:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
    wait(1)
    VirtualUser:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
end)

-- GUI Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Neon Hub - Blox Fruits", "DarkTheme")

-- Main Tabs
local MainTab = Window:NewTab("Main")
local FarmingTab = Window:NewTab("Farming")
local TeleportTab = Window:NewTab("Teleport")
local MiscTab = Window:NewTab("Misc")
local PlayerTab = Window:NewTab("Player")

-- Main Sections
local MainSection = MainTab:NewSection("Auto Farm Settings")
local AutoFarmSection = FarmingTab:NewSection("Auto Farm Options")
local AutoQuestSection = FarmingTab:NewSection("Auto Quest")
local IslandSection = TeleportTab:NewSection("Islands")
local DungeonSection = TeleportTab:NewSection("Dungeon")
local PlayerSection = PlayerTab:NewSection("Player Options")
local MiscSection = MiscTab:NewSection("Miscellaneous")

-- Values
local AutoFarm = false
local AutoQuest = false
local AutoNewWorld = false
local AutoThirdSea = false
local AutoBuso = false
local AutoKen = false
local AutoSoru = false
local AutoRaid = false
local AutoElite = false
local AutoBartilo = false
local AutoSaber = false
local AutoPole = false
local AutoChest = false
local AutoBuyFragments = false
local AutoHaki = false
local AutoMelee = false
local AutoDefense = false
local AutoSword = false
local AutoGun = false
local AutoFruit = false
local AutoObservation = false
local AutoMirage = false
local AutoBone = false
local AutoCakePrince = false
local AutoFarmNear = false
local SelectedWeapon = "Melee"
local SelectedFarm = "Bandit [Lv. 5]"
local SelectedQuest = "BanditQuest1"
local SelectedIsland = "Middle Island"
local SelectedDungeon = "Flame"
local WalkSpeed = 16
local JumpPower = 50
local FarmRadius = 25

-- Weapon List
local WeaponList = {
    "Melee",
    "Sword",
    "Gun",
    "Devil Fruit"
}

-- Farm List
local FarmList = {
    "Bandit [Lv. 5]",
    "Monkey [Lv. 14]",
    "Gorilla [Lv. 20]",
    "Pirate [Lv. 35]",
    "Brute [Lv. 45]",
    "Desert Bandit [Lv. 60]",
    "Snow Bandit [Lv. 90]",
    "Snowman [Lv. 100]",
    "Chief Petty Officer [Lv. 120]",
    "Sky Bandit [Lv. 150]",
    "Dark Master [Lv. 175]",
    "Prisoner [Lv. 190]",
    "Dangerous Prisoner [Lv. 210]",
    "Toga Warrior [Lv. 250]",
    "Military Soldier [Lv. 300]",
    "Military Spy [Lv. 330]",
    "Fishman Warrior [Lv. 375]",
    "Fishman Commando [Lv. 400]",
    "God's Guard [Lv. 450]",
    "Shanda [Lv. 475]",
    "Royal Squad [Lv. 525]",
    "Royal Soldier [Lv. 550]",
    "Galley Pirate [Lv. 625]",
    "Galley Captain [Lv. 650]"
}

-- Quest List
local QuestList = {
    "BanditQuest1",
    "BanditQuest2",
    "SnowQuest1",
    "SnowQuest2",
    "BuggyQuest1",
    "BuggyQuest2",
    "MarineQuest1",
    "MarineQuest2",
    "PrisonerQuest",
    "AmazonQuest1",
    "AmazonQuest2",
    "FishmanQuest",
    "SkyExp1",
    "SkyExp2",
    "SkyExp3",
    "TikiQuest1",
    "TikiQuest2"
}

-- Island List
local IslandList = {
    "Middle Island",
    "Jungle Island",
    "Pirate Village",
    "Desert Island",
    "Snow Island",
    "Marine Fortress",
    "Sky Island 1",
    "Sky Island 2",
    "Sky Island 3",
    "Prison",
    "Colosseum",
    "Magma Village",
    "Underwater City",
    "Fountain City",
    "Zou",
    "Kingdom of Rose",
    "Cafe",
    "Mansion",
    "Great Tree",
    "Castle on the Sea",
    "Hydra Island",
    "Floating Turtle",
    "Haunted Castle"
}

-- Dungeon List
local DungeonList = {
    "Flame",
    "Ice",
    "Quake",
    "Dark",
    "Light",
    "Sand",
    "Forest",
    "Rumble",
    "Magma",
    "Human"
}

-- Functions
function TweenTo(target)
    local Distance = (HumanoidRootPart.Position - target.Position).Magnitude
    local Speed = 300
    local Time = Distance / Speed
    
    local TweenInfo = TweenInfo.new(Time, Enum.EasingStyle.Linear)
    local Tween = game:GetService("TweenService"):Create(HumanoidRootPart, TweenInfo, {CFrame = target})
    Tween:Play()
    
    repeat wait() until Tween.Completed
end

function EquipWeapon(Tool)
    if Player.Backpack:FindFirstChild(Tool) then
        Player.Character.Humanoid:EquipTool(Player.Backpack:FindFirstChild(Tool))
    end
end

function GetClosestEnemy()
    local ClosestEnemy = nil
    local ShortestDistance = math.huge
    
    for _, Enemy in pairs(workspace.Enemies:GetChildren()) do
        if Enemy:FindFirstChild("Humanoid") and Enemy.Humanoid.Health > 0 and Enemy:FindFirstChild("HumanoidRootPart") then
            local Distance = (HumanoidRootPart.Position - Enemy.HumanoidRootPart.Position).Magnitude
            
            if Distance < ShortestDistance and Distance <= FarmRadius then
                ClosestEnemy = Enemy
                ShortestDistance = Distance
            end
        end
    end
    
    return ClosestEnemy
end

function AutoAttack()
    if SelectedWeapon == "Melee" then
        EquipWeapon("Combat")
    elseif SelectedWeapon == "Sword" then
        for _, Sword in pairs(Player.Backpack:GetChildren()) do
            if Sword:IsA("Tool") and Sword.ToolTip == "Sword" then
                EquipWeapon(Sword.Name)
                break
            end
        end
    elseif SelectedWeapon == "Gun" then
        for _, Gun in pairs(Player.Backpack:GetChildren()) do
            if Gun:IsA("Tool") and Gun.ToolTip == "Gun" then
                EquipWeapon(Gun.Name)
                break
            end
        end
    elseif SelectedWeapon == "Devil Fruit" then
        for _, Fruit in pairs(Player.Backpack:GetChildren()) do
            if Fruit:IsA("Tool") and Fruit.ToolTip == "Blox Fruit" then
                EquipWeapon(Fruit.Name)
                break
            end
        end
    end
    
    local Enemy = GetClosestEnemy()
    
    if Enemy then
        TweenTo(Enemy.HumanoidRootPart.CFrame)
        game:GetService("VirtualInputManager"):SendKeyEvent(true, "X", false, game)
        game:GetService("VirtualInputManager"):SendKeyEvent(false, "X", false, game)
    end
end

function AutoFarmQuest()
    if AutoQuest then
        local Quest = require(ReplicatedStorage.QuestModule).Get(Player)
        
        if Quest.Name ~= SelectedQuest then
            require(ReplicatedStorage.QuestModule).Take(SelectedQuest)
        end
    end
    
    if AutoFarm then
        AutoAttack()
    end
end

-- Main Section
MainSection:NewToggle("Auto Farm", "Automatically farms enemies", function(State)
    AutoFarm = State
    
    while AutoFarm do
        AutoFarmQuest()
        wait()
    end
end)

MainSection:NewToggle("Auto Quest", "Automatically takes quests", function(State)
    AutoQuest = State
end)

MainSection:NewDropdown("Select Weapon", "Select weapon to use", WeaponList, function(Option)
    SelectedWeapon = Option
end)

MainSection:NewDropdown("Select Farm", "Select enemy to farm", FarmList, function(Option)
    SelectedFarm = Option
end)

MainSection:NewDropdown("Select Quest", "Select quest to take", QuestList, function(Option)
    SelectedQuest = Option
end)

MainSection:NewSlider("Farm Radius", "Set farm radius", 500, 10, function(Value)
    FarmRadius = Value
end)

-- Auto Farm Section
AutoFarmSection:NewToggle("Auto New World", "Automatically goes to new world", function(State)
    AutoNewWorld = State
    
    while AutoNewWorld do
        -- Code to go to new world
        wait()
    end
end)

AutoFarmSection:NewToggle("Auto Third Sea", "Automatically goes to third sea", function(State)
    AutoThirdSea = State
    
    while AutoThirdSea do
        -- Code to go to third sea
        wait()
    end
end)

AutoFarmSection:NewToggle("Auto Buso", "Automatically activates buso haki", function(State)
    AutoBuso = State
    
    while AutoBuso do
        game:GetService("VirtualInputManager"):SendKeyEvent(true, "F", false, game)
        wait(0.1)
        game:GetService("VirtualInputManager"):SendKeyEvent(false, "F", false, game)
        wait(300)
    end
end)

AutoFarmSection:NewToggle("Auto Ken", "Automatically activates ken haki", function(State)
    AutoKen = State
    
    while AutoKen do
        game:GetService("VirtualInputManager"):SendKeyEvent(true, "H", false, game)
        wait(0.1)
        game:GetService("VirtualInputManager"):SendKeyEvent(false, "H", false, game)
        wait(300)
    end
end)

-- Teleport Section
IslandSection:NewDropdown("Select Island", "Select island to teleport", IslandList, function(Option)
    SelectedIsland = Option
end)

IslandSection:NewButton("Teleport", "Teleport to selected island", function()
    -- Code to teleport to island
end)

DungeonSection:NewDropdown("Select Dungeon", "Select dungeon to teleport", DungeonList, function(Option)
    SelectedDungeon = Option
end)

DungeonSection:NewButton("Teleport", "Teleport to selected dungeon", function()
    -- Code to teleport to dungeon
end)

-- Player Section
PlayerSection:NewSlider("Walk Speed", "Set walk speed", 500, 16, function(Value)
    WalkSpeed = Value
    Humanoid.WalkSpeed = WalkSpeed
end)

PlayerSection:NewSlider("Jump Power", "Set jump power", 500, 50, function(Value)
    JumpPower = Value
    Humanoid.JumpPower = JumpPower
end)

PlayerSection:NewToggle("Infinity Jump", "Jump infinitely", function(State)
    local InfiniteJump = State
    
    game:GetService("UserInputService").JumpRequest:Connect(function()
        if InfiniteJump then
            Humanoid:ChangeState("Jumping")
        end
    end)
end)

-- Misc Section
MiscSection:NewButton("Rejoin", "Rejoin the game", function()
    TeleportService:Teleport(game.PlaceId, Player)
end)

MiscSection:NewButton("Server Hop", "Hop to a different server", function()
    -- Server hop code
end)

MiscSection:NewButton("Copy Discord", "Copy discord invite", function()
    setclipboard("https://discord.gg/neonhub")
end)

-- Character Added
Player.CharacterAdded:Connect(function(NewCharacter)
    Character = NewCharacter
    Humanoid = Character:WaitForChild("Humanoid")
    HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
    
    Humanoid.WalkSpeed = WalkSpeed
    Humanoid.JumpPower = JumpPower
end)

-- Notifications
Library:Notify("Neon Hub Loaded!", "Welcome " .. Player.Name, 5)
